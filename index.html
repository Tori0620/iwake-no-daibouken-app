<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç§„ÉØ„Ç±„ÅÆÂ§ßÂÜíÈô∫</title>
    <!-- Tailwind CSS CDN„ÇíË™≠„ÅøËæº„Åø -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - M PLUS Rounded 1c „Å® Mochiy Pop P One „ÇíË™≠„ÅøËæº„Åø -->
    <link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ÂÖ®‰ΩìÂÖ±ÈÄö„Çπ„Çø„Ç§„É´ */
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow-y: auto;
            padding: 1rem;
            box-sizing: border-box;
            position: relative;
        }

        /* „Çø„Ç§„Éà„É´ÁîªÈù¢„Çπ„Çø„Ç§„É´ */
        .title-container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            padding-top: 3rem;
            width: 100%;
            max-width: 400px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .title-iwake-image {
            width: 200px;
            height: auto;
            margin-bottom: 0.5rem;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
        }
        .start-button {
            background-image: linear-gradient(to right, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 9999px;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out, border 0.3s ease-in-out;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            border: 3px solid #ffffff;
            animation: bounce 1s infinite alternate;
            font-family: 'Mochiy Pop P One', sans-serif;
        }
        .start-button:hover {
            transform: translateY(-8px) scale(1.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border-color: #ffd700;
        }
        @keyframes bounce {
            0% { transform: translateY(0); }
            100% { transform: translateY(-5px); }
        }

        /* „Éî„É≥„ÉÅ„Ç∑„ÉÅ„É•„Ç®„Éº„Ç∑„Éß„É≥ÈÅ∏ÊäûÁîªÈù¢„Çπ„Çø„Ç§„É´ */
        .pinch-selection-container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            width: 100%;
            max-width: 600px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .pinch-title {
            font-family: 'Mochiy Pop P One', sans-serif;
            font-size: 2rem;
            color: #333;
            margin-bottom: 2rem;
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
            margin-bottom: 2rem;
        }
        .situation-button {
            background-image: linear-gradient(to right, #ff7e5f 0%, #feb47b 100%);
            color: white;
            padding: 1rem;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 100px;
        }
        .situation-button:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .situation-button .emoji {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .situation-button .text {
            font-size: 1.1rem;
        }

        /* Ë®Ä„ÅÑË®≥ÁîüÊàêÁîªÈù¢„Çπ„Çø„Ç§„É´ */
        .excuse-generator-container {
            background-color: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            width: 100%;
            max-width: 450px; /* „Ç§„ÉØ„Ç±„ÅåË¶ã„Åà„Çã„Çà„ÅÜ„Å´Ë™øÊï¥ */
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative; /* ËÉåÊôØ„Ç§„ÉØ„Ç±„ÇíÈáç„Å≠„Çã„Åü„ÇÅ */
        }
        .excuse-background-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://i.imgur.com/sM6DwnT.jpg'); /* „Ç§„ÉØ„Ç±„ÅÆÁîªÂÉè„ÇíË®≠ÂÆö */
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center center;
            opacity: 0.8;
            z-index: 0;
            border-radius: 20px; /* Ë¶™„Ç≥„É≥„ÉÜ„Éä„Å´Âêà„Çè„Åõ„Å¶Ëßí‰∏∏ */
        }
        .excuse-overlay-content {
            position: relative;
            z-index: 1;
            background-color: rgba(255, 255, 255, 0.85); /* ÂçäÈÄèÊòé„ÅÆËÉåÊôØ */
            border-radius: 15px; /* Ëßí‰∏∏ */
            padding: 1.5rem;
            width: calc(100% - 2rem); /* ‰∏°Á´Ø„ÅÆ„Éë„Éá„Ç£„É≥„Ç∞„ÇíËÄÉÊÖÆ */
            margin-top: 100px; /* „Ç§„ÉØ„Ç±„ÅÆÈ°î„ÇíÈÅø„Åë„Å¶‰∏ã„Å´ÈÖçÁΩÆ */
            margin-bottom: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .current-pinch-text {
            font-family: 'Mochiy Pop P One', sans-serif;
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 1rem;
        }
        .excuse-box {
            background-color: #e0f2f7;
            border: 2px solid #a7d9ed;
            border-radius: 15px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.1rem;
            color: #333;
            line-height: 1.6;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            word-break: break-word;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #6a11cb;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Êàª„Çã„Éú„Çø„É≥ */
        .back-button {
            background-color: #cccccc;
            color: #333;
            padding: 0.8rem 1.8rem;
            border-radius: 9999px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: none;
            margin-top: 1.5rem;
            max-width: 200px;
        }
        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        /* SNSÂÖ±Êúâ„Éú„Çø„É≥„ÅÆ„Çπ„Çø„Ç§„É´ */
        .social-share-buttons {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 10;
        }
        .social-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .social-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        .social-button svg {
            width: 24px;
            height: 24px;
            fill: white;
        }
        .social-button.x-button {
            background-color: #000000;
        }
        .social-button.line-button {
            background-color: #00c300;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ */
        @media (max-width: 640px) {
            .title-container, .pinch-selection-container, .excuse-generator-container {
                padding: 1.5rem;
                max-width: 95%;
            }
            .title-iwake-image {
                width: 150px;
            }
            .start-button {
                padding: 0.8rem 2rem;
                font-size: 1rem;
            }
            .pinch-title {
                font-size: 1.8rem;
            }
            .button-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .situation-button {
                min-height: 80px;
                font-size: 1rem;
            }
            .situation-button .emoji {
                font-size: 1.3rem;
            }
            .situation-button .text {
                font-size: 1rem;
            }
            .excuse-overlay-content {
                padding: 1rem;
                margin-top: 80px; /* „É¢„Éê„Ç§„É´„Åß„ÅÆ„Ç§„ÉØ„Ç±ÁîªÂÉèË™øÊï¥ */
            }
            .current-pinch-text {
                font-size: 1.3rem;
            }
            .excuse-box {
                font-size: 0.9rem;
                min-height: 70px;
            }
            .back-button {
                padding: 0.7rem 1.5rem;
                font-size: 1rem;
            }
            .social-share-buttons {
                bottom: 15px;
                right: 15px;
                gap: 8px;
            }
            .social-button {
                width: 45px;
                height: 45px;
            }
            .social-button svg {
                width: 22px;
                height: 22px;
            }
            .social-button.line-button {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <script>
        // ÂÖ®„Å¶„ÅÆÁîªÈù¢„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíJavaScriptÂ§âÊï∞„Å®„Åó„Å¶ÂÆöÁæ©
        const titleScreenHtml = `
            <div class="title-container">
                <img src="https://i.imgur.com/euu7Hqz.jpg" alt="„Ç§„ÉØ„Ç±„Å®„Çø„Ç§„Éà„É´" class="title-iwake-image">
                <button id="startButton" class="start-button">Ë®Ä„ÅÑË®≥„ÇíÂßã„ÇÅ„Çã</button>
            </div>
        `;

        const pinchSituationsHtml = `
            <div class="pinch-selection-container">
                <h1 class="pinch-title">„Éî„É≥„ÉÅ„Å™„Ç∑„ÉÅ„É•„Ç®„Éº„Ç∑„Éß„É≥„ÇíÈÅ∏„Çì„Åß„Å≠ÔºÅ</h1>
                <div class="button-grid" id="situationButtons">
                    <!-- „Ç∑„ÉÅ„É•„Ç®„Éº„Ç∑„Éß„É≥„Éú„Çø„É≥„ÅØJavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Åæ„Åô -->
                </div>
            </div>
        `;

        const excuseGeneratorHtml = `
            <div class="excuse-generator-container">
                <div class="excuse-background-image"></div>
                <div class="excuse-overlay-content">
                    <h2 id="currentPinch" class="current-pinch-text"></h2>
                    <div id="excuseDisplay" class="excuse-box">
                        <div class="loading-spinner hidden" id="loadingSpinner"></div>
                        <span id="excuseText">Ë®Ä„ÅÑË®≥„ÇíÁîüÊàê‰∏≠...</span>
                    </div>
                    <button id="backToPinchSelectionButton" class="back-button">„Éî„É≥„ÉÅÈÅ∏Êäû„Å´Êàª„Çã</button>
                </div>
            </div>
            <!-- SNSÂÖ±Êúâ„Éú„Çø„É≥„ÅØbodyÁõ¥‰∏ã„Å´Âõ∫ÂÆöË°®Á§∫ -->
            <div class="social-share-buttons">
                <button id="shareXButton" class="social-button x-button">
                    <svg viewBox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1nao33i r-rxz2fo r-17s6mgv r-o7ynqc r-64hb5y r-8kz0gk r-1efd50x r-5kkj8d r-f72cbv r-o8yidv r-13qz1uu" fill="white"><g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.814L4.938 21.75H1.62L9.826 10.79 1.62 2.25h7.804L13.09 8.84l5.154-6.59z"></path></g></svg>
                </button>
                <button id="shareLineButton" class="social-button line-button">
                    LINE
                </button>
            </div>
        `;

        // „Ç¢„Éó„É™„ÅÆÁèæÂú®„ÅÆÁä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åô„ÇãÂ§âÊï∞
        let currentPinchSituation = '';

        // ÁîªÈù¢„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Åô„Çã„É°„Ç§„É≥Èñ¢Êï∞
        function renderScreen(screenName, data = {}) {
            document.body.innerHTML = ''; // ÁèæÂú®„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Çí„ÇØ„É™„Ç¢

            if (screenName === 'title') {
                document.body.innerHTML = titleScreenHtml;
                document.getElementById('startButton').addEventListener('click', () => {
                    renderScreen('pinchSelection');
                });
            } else if (screenName === 'pinchSelection') {
                document.body.innerHTML = pinchSituationsHtml;
                const situations = [
                    { id: 1, emoji: '‚è∞', text: 'Ëøî‰ø°ÈÅÖ„ÇåÊ∞óÂë≥' },
                    { id: 2, emoji: 'üìù', text: 'ÈÄ£Áµ°Êäú„Åë' },
                    { id: 3, emoji: '‚è±Ô∏è', text: 'ÊôÇÈñì„Åö„Çå' },
                    { id: 4, emoji: 'üì§', text: '„Éá„Éº„ÇøÊú™ÈÄÅ‰ø°' },
                    { id: 5, emoji: 'üìç', text: 'Â†¥ÊâÄÈÅï„ÅÑ' },
                    { id: 6, emoji: 'üóìÔ∏è', text: '‰∫àÂÆö„Åã„Å∂„Çä' },
                    { id: 7, emoji: 'üìû', text: 'ÈõªË©±Âá∫Âøò„Çå' },
                    { id: 8, emoji: 'üóìÔ∏è', text: '„Ç¢„ÉùÂøò„Çå' },
                    { id: 9, emoji: '‚è≥', text: 'Á∑†ÂàáÂãòÈÅï„ÅÑ' },
                    { id: 10, emoji: 'üò¥', text: 'ÊúùÂØùÂùä' }
                ];
                const situationButtonsContainer = document.getElementById('situationButtons');
                situations.forEach(situation => {
                    const button = document.createElement('button');
                    button.className = 'situation-button';
                    button.innerHTML = `
                        <span class="emoji">${situation.emoji}</span>
                        <span class="text">${situation.text}</span>
                    `;
                    button.addEventListener('click', () => {
                        currentPinchSituation = situation.text; // ÈÅ∏Êäû„Åï„Çå„Åü„Éî„É≥„ÉÅ„Çí‰øùÂ≠ò
                        renderScreen('excuseGenerator', { situation: situation.text });
                    });
                    situationButtonsContainer.appendChild(button);
                });
            } else if (screenName === 'excuseGenerator') {
                document.body.innerHTML = excuseGeneratorHtml;
                const excuseDisplay = document.getElementById('excuseDisplay');
                const excuseText = document.getElementById('excuseText');
                const loadingSpinner = document.getElementById('loadingSpinner');
                const currentPinchTextElement = document.getElementById('currentPinch');
                const shareXButton = document.getElementById('shareXButton');
                const shareLineButton = document.getElementById('shareLineButton');
                const backToPinchSelectionButton = document.getElementById('backToPinchSelectionButton');

                // „Éî„É≥„ÉÅÁä∂Ê≥Å„ÇíË®≠ÂÆö
                if (data.situation) {
                    currentPinchTextElement.textContent = `„Éî„É≥„ÉÅ: ${data.situation}`;
                    generateExcuse(data.situation);
                } else {
                    currentPinchTextElement.textContent = '„Éî„É≥„ÉÅ„ÅåÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì';
                    excuseText.textContent = 'Ââç„ÅÆÁîªÈù¢„Å´Êàª„Å£„Å¶„Éî„É≥„ÉÅ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ';
                    loadingSpinner.classList.add('hidden');
                }

                // SNSÂÖ±ÊúâÊ©üËÉΩ (Êñ∞„Åó„ÅÑ„Éú„Çø„É≥„Å´Ââ≤„ÇäÂΩì„Å¶)
                shareXButton.addEventListener('click', () => {
                    const textToShare = excuseText.textContent;
                    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(textToShare)}&hashtags=Ë®Ä„ÅÑË®≥„Ç∏„Çß„Éç„É¨„Éº„Çø„Éº,„Ç§„ÉØ„Ç±„ÅÆÂ§ßÂÜíÈô∫`;
                    window.open(twitterUrl, '_blank');
                });

                shareLineButton.addEventListener('click', () => {
                    const textToShare = excuseText.textContent;
                    const lineUrl = `https://social-plugins.line.me/lineit/share?text=${encodeURIComponent(textToShare)}`;
                    window.open(lineUrl, '_blank');
                });

                // Êàª„Çã„Éú„Çø„É≥
                backToPinchSelectionButton.addEventListener('click', () => {
                    renderScreen('pinchSelection'); // „Éî„É≥„ÉÅÈÅ∏ÊäûÁîªÈù¢„Å´Êàª„Çã
                });

                // Ë®Ä„ÅÑË®≥„ÇíÁîüÊàê„Åô„ÇãÈñ¢Êï∞
                async function generateExcuse(situation) {
                    excuseText.textContent = ''; // „ÉÜ„Ç≠„Çπ„Éà„Çí„ÇØ„É™„Ç¢
                    loadingSpinner.classList.remove('hidden'); // „É≠„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Éî„Éä„Éº„ÇíË°®Á§∫
                    excuseDisplay.style.justifyContent = 'center'; // „Çπ„Éî„Éä„Éº„Çí‰∏≠Â§Æ„Å´

                    try {
                        // Gemini API„ÇíÂëº„Å≥Âá∫„Åó„Å¶Ë®Ä„ÅÑË®≥„ÇíÁîüÊàê
                        let chatHistory = [];
                        const prompt = `${situation}„Å®„ÅÑ„ÅÜ„Éî„É≥„ÉÅ„Å™„Ç∑„ÉÅ„É•„Ç®„Éº„Ç∑„Éß„É≥„Å´ÂØæ„Åô„Çã„ÄÅ„É¶„Éã„Éº„ÇØ„ÅßÈù¢ÁôΩ„ÅÑË®Ä„ÅÑË®≥„Çí30ÂÄã„ÄÅÁÆáÊù°Êõ∏„Åç„ÅßÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÂêÑË®Ä„ÅÑË®≥„ÅØÁü≠„Åè„ÄÅÂÖ∑‰ΩìÁöÑ„Å™ÂÜÖÂÆπ„Åß„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇJSONÂΩ¢Âºè„ÅßËøî„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ‰æã: {"excuses": ["Ë®Ä„ÅÑË®≥1", "Ë®Ä„ÅÑË®≥2", ...]}`;
                        chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                        const payload = {
                            contents: chatHistory,
                            generationConfig: {
                                responseMimeType: "application/json",
                                responseSchema: {
                                    type: "OBJECT",
                                    properties: {
                                        "excuses": {
                                            type: "ARRAY",
                                            items: { "type": "STRING" }
                                        }
                                    },
                                    "propertyOrdering": ["excuses"]
                                }
                            }
                        };
                        const apiKey = "AIzaSyBYVewr5AhWlMKWzH5pCGIvF_WnOiUFkKE"; // Canvas„ÅåËá™Âãï„ÅßÊèê‰æõ
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                        console.log("API„É™„ÇØ„Ç®„Çπ„ÉàÈÄÅ‰ø°‰∏≠...", payload); // „É™„ÇØ„Ç®„Çπ„ÉàÂÜÖÂÆπ„Çí„É≠„Ç∞Âá∫Âäõ

                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (!response.ok) {
                            const errorBody = await response.text();
                            throw new Error(`HTTP„Ç®„É©„Éº! „Çπ„ÉÜ„Éº„Çø„Çπ: ${response.status}, „É¨„Çπ„Éù„É≥„Çπ: ${errorBody}`);
                        }

                        const result = await response.json();
                        console.log("Gemini API Response (Raw):", result); // Áîü„ÅÆAPI„É¨„Çπ„Éù„É≥„Çπ„Çí„É≠„Ç∞Âá∫Âäõ

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            const jsonString = result.candidates[0].content.parts[0].text;
                            console.log("Gemini API Response (JSON String):", jsonString); // JSONÊñáÂ≠óÂàó„Çí„É≠„Ç∞Âá∫Âäõ

                            try {
                                const parsedJson = JSON.parse(jsonString);
                                const excuses = parsedJson.excuses;

                                if (excuses && excuses.length > 0) {
                                    const randomIndex = Math.floor(Math.random() * excuses.length);
                                    excuseText.textContent = excuses[randomIndex]; // „É©„É≥„ÉÄ„É†„Å™Ë®Ä„ÅÑË®≥„ÇíË°®Á§∫
                                    excuseDisplay.style.justifyContent = 'flex-start'; // „ÉÜ„Ç≠„Çπ„ÉàË°®Á§∫„Å´Âêà„Çè„Åõ„Å¶Ë™øÊï¥
                                } else {
                                    excuseText.textContent = 'Ë®Ä„ÅÑË®≥„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ';
                                    excuseDisplay.style.justifyContent = 'center';
                                    console.warn("API„ÅØJSON„ÇíËøî„Åó„Åü„Åå„ÄÅexcusesÈÖçÂàó„ÅåÁ©∫„Åæ„Åü„ÅØË¶ã„Å§„Åã„Çâ„Å™„ÅÑ„ÄÇ");
                                }
                            } catch (jsonParseError) {
                                excuseText.textContent = 'API„Åã„Çâ„ÅÆÂøúÁ≠î„ÅÆËß£Êûê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ';
                                excuseDisplay.style.justifyContent = 'center';
                                console.error('JSONËß£Êûê„Ç®„É©„Éº:', jsonParseError);
                                console.error('Ëß£Êûê„Å´Â§±Êïó„Åó„ÅüJSONÊñáÂ≠óÂàó:', jsonString);
                            }
                        } else {
                            excuseText.textContent = 'Ë®Ä„ÅÑË®≥„ÅÆÁîüÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇAPI„Åã„Çâ„ÅÆÂøúÁ≠î„Åå‰∫àÊúü„Åõ„Å¨ÂΩ¢Âºè„Åß„Åô„ÄÇ';
                            excuseDisplay.style.justifyContent = 'center';
                            console.error('APIÂøúÁ≠î„ÅÆÊßãÈÄ†„Åå‰∏çÊ≠£:', result);
                        }
                    } catch (error) {
                        console.error('Ë®Ä„ÅÑË®≥ÁîüÊàê„Ç®„É©„Éº:', error);
                        excuseText.textContent = `„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇË©≥Á¥∞: ${error.message}`;
                        excuseDisplay.style.justifyContent = 'center';
                    } finally {
                        loadingSpinner.classList.add('hidden'); // „É≠„Éº„Éá„Ç£„É≥„Ç∞„Çπ„Éî„Éä„Éº„ÇíÈùûË°®Á§∫
                    }
                }
            }
        }

        // „Ç¢„Éó„É™Ëµ∑ÂãïÊôÇ„Å´„Çø„Ç§„Éà„É´ÁîªÈù¢„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        document.addEventListener('DOMContentLoaded', () => {
            renderScreen('title');
        });
    </script>
</body>
</html>

